<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Project Soothsayer</title>
    <link rel="stylesheet" href="css/master.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/materialize.min.css" media="screen" title="no title" charset="utf-8">
    <link rel="stylesheet" href="css/dropzone.css" media="screen" title="no title" charset="utf-8">

    <style>
        .margin-tb{
            margin: 25px 0;
        }
        .main-heading{
            font-size: 1.5em;
            color: #3D8EB9;
            text-decoration: underline;
        }
        input[type=text]:focus: not ([readonly]){
            border-bottom: 1px solid #3D8EB9;
            border-shadow: 0 1px 0 0 #3D8EB9;
        }
        .button-style{
            margin-top: 150px;
        }
        #resultDiv{
            display: none;
        }
        #resultDiv p{
            font-size: 1.3em;
            color: black;
        }
        #resultDiv p span{
            font-size: 1.3em;
            color: #3D8EB9;
        }
    </style>
</head>

<body>

    <nav>
        <div class="nav-wrapper">
            <a href="#" class="brand-logo center">Soothsayer</a>
            <ul id="nav-mobile" class="left hide-on-med-and-down">

            </ul>
        </div>
    </nav>

    <div class="container">
        <div class="row">
            <div class="col s12">
                <form action="upload.php" class="dropzone" >

                </form>

                <div class="row margin-tb">
                        <p class="center main-heading"> Please fill the details </p>
                    <form class="col s12" method="post" >
                      <div class="row">
                        <div class="input-field col s6">
                          <input placeholder="Placeholder" id="experience" type="text" class="validate">
                          <label for="experience">Experience</label>
                        </div>
                        <div class="input-field col s6">
                          <input id="testscore" type="text" class="validate">
                          <label for="testscore">Test Score</label>
                        </div>
                      </div>

                      <div class="input-field col s6">
                        <select id="appliedfor">
                          <option value="" disabled selected>Applied For</option>
                          <option value="java">Java</option>
                          <option value="android">Android</option>

                        </select>
                        <label>Apllied For</label>
                      </div>
                      <button class="btn waves-effect waves-light btn-large right button-style" type="submit"
                       id="send" name="action" >Predict It
                       <i class="material-icons right"></i>
                     </button>
                    </form>
                  </div>


            </div>
            <div id="resultDiv">
                <p class="center" style="color:#3D8EB9;font-size:1.5em"> Here is Your Result ! </p>
                <p> Class : <span id="class"> </span> </p>
                <p> Probablity : <span id="prob"></span> </p>
            </div>

        </div>
    </div>

</body>





<script src="js/jquery-3.0.0.min.js" charset="utf-8"></script>
<script src="js/materialize.min.js" charset="utf-8"></script>
<script src="js/dropzone.js" charset="utf-8"></script>

<script type="text/javascript">
    $(document).ready(function(){
        $('select').material_select();
    var myfile = "";
        $('#resumeFile').on('change', function() {
            myfile = $(this).val();
            var ext = myfile.split('.').pop();
            if (ext == "pdf" || ext == "docx" || ext == "doc") {
                alert(ext);
            } else {
                alert("Please, choose a valid Document format!");
            }
        });
    });
</script>
<script type="text/javascript">
    Dropzone.options.resumeFile = {
        acceptedFiles: "application/msword,text/pdf,text/plain"
    }
</script>

<script type="text/javascript">
				$(function() {
							$("#send").click(function() {
                                console.log("I am here");
							var data={
								 experience : $("#experience").val(),
						 	  	testscore : $("#testscore").val(),
						 		appliedfor :$("#appliedfor").val()
								};
                                console.log(data);
			// console.log(data);
					$.ajax({
							type: "POST",
							url: "http://localhost:5000/postresume",
                            "crossDomain": true,
							data: "{\n \"experience\": "+data['experience']+",\n \"testscore\" : "+data['testscore']+",\n \"appliedfor\" : \""+data['appliedfor']+"\"\n}",
                            "headers": {
                                "content-type": "application/json",
                                "Access-Control-Allow-Origin" : "http://localhost:8888/"
                            },
                            dataType: "json",
							success: function(data){
								console.log(data['class']);
                                window.scrollTo(5000, 0);
                                $("#resultDiv").css ("display", "block");
                                $('#class').html(data['class']);
                                $('#prob').html(data['prob']); 
							},
                            failure: function(errMsg) {
                                   console.log(errMsg);
                               },
                            error: function (xhr, ajaxOptions, thrownError) {
                               console.log(xhr.status);
                               console.log(thrownError);
                               }
					});

					return false;
			});
			});

				</script>

</body>

</html>
